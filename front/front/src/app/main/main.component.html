<mat-error *ngIf="networkingErr">
    Something went wrong please try again
</mat-error>
  
<mat-card class="example-card">
    <h3>{{timenow}}</h3> 
    <mat-card-actions>       
        <button  mat-raised-button color="accent" (click)="update()"> Check and Update your TIME ZONE</button>    
    </mat-card-actions>
    <h2> For users with free tariff plan analytics info is limited</h2>

    <mat-card-actions>
       
        <button  mat-raised-button color="accent" (click)="updateTarif()"> Check AND Update your TARIFF PLAN</button>    
    </mat-card-actions>
</mat-card>

<table mat-table [dataSource]="events" class="mat-elevation-z8" class="results-table">
  
  <ng-container matColumnDef="maych_id">
      
    <th mat-header-cell *matHeaderCellDef>maych_id</th>
    <td mat-cell *matCellDef="let event">
        <a routerLink="/detail/{{userid}}/{{event.match_id}}">
         {{event.match_id}}
        </a>
    </td>
  </ng-container>

  <ng-container matColumnDef="time">
    <th mat-header-cell *matHeaderCellDef>time</th>
    <td mat-cell *matCellDef="let event">
        <a routerLink="/detail/{{userid}}/{{event.match_id}}">
     {{event.event_play_time | FilterPipe}}
        </a>
    </td>
  </ng-container>

  <ng-container matColumnDef="country">
    <th mat-header-cell *matHeaderCellDef>country</th>
    <td mat-cell *matCellDef="let event">
        <a routerLink="/detail/{{userid}}/{{event.match_id}}">
      {{event.country}}
        </a>
    </td>
  </ng-container>

  <ng-container matColumnDef="leaque">
    <th mat-header-cell *matHeaderCellDef>leaque</th>
    <td mat-cell *matCellDef="let event">
        <a routerLink="/detail/{{userid}}/{{event.match_id}}">
        {{event.competition}}
        </a>
    </td>
  </ng-container>

  <ng-container matColumnDef="match">
      <th mat-header-cell *matHeaderCellDef>match</th>
      <td mat-cell *matCellDef="let event">
          <a routerLink="/detail/{{userid}}/{{event.match_id}}">
          {{event.players}}
          </a>
      </td>
    </ng-container>

    <ng-container matColumnDef=" 1 ">
      <th mat-header-cell *matHeaderCellDef>1</th>
      <td mat-cell *matCellDef="let event">
        {{(event.probabilities.full_time.home_draw_away.home*100).toFixed(2)}}%
      </td>
    </ng-container>

    <ng-container matColumnDef=" x ">
      <th mat-header-cell *matHeaderCellDef>x</th>
      <td mat-cell *matCellDef="let event">
         {{(event.probabilities.full_time.home_draw_away.draw*100).toFixed(2)}}%
      </td>
    </ng-container>

    <ng-container matColumnDef=" 2 ">
      <th mat-header-cell *matHeaderCellDef>2</th>
      <td mat-cell *matCellDef="let event">
          {{(event.probabilities.full_time.home_draw_away.away*100).toFixed(2)}}%
      </td>
    </ng-container>
  
    <ng-container matColumnDef=" over0.5HT ">
      <th mat-header-cell *matHeaderCellDef>Over0.5HT</th>
     
      <td mat-cell *matCellDef="let event">  
        <p *ngIf="event.probabilities.first_half">      
          {{(event.probabilities.first_half.over_under['0.50'].over*100).toFixed(2)}}%
        </p>
              
      </td>
    </ng-container>  

    <ng-container matColumnDef=" over05.SH ">
        <th mat-header-cell *matHeaderCellDef>Over05.SH</th>
        <td mat-cell *matCellDef="let event">
            <p *ngIf="event.probabilities.first_half">      
           {{(event.probabilities.second_half.over_under['0.50'].over*100).toFixed(2)}}%
            </p>
        </td>
      </ng-container>
    
  
    <ng-container matColumnDef=" over 1.5 ">
      <th mat-header-cell *matHeaderCellDef>over 1.5</th>
      <td mat-cell *matCellDef="let event">
         {{(event.probabilities.full_time.over_under['1.50'].over*100).toFixed(2)}}%
      </td>
    </ng-container>

    <ng-container matColumnDef=" over 2.5 ">
        <th mat-header-cell *matHeaderCellDef>over 2.5</th>
        <td mat-cell *matCellDef="let event">
            {{(event.probabilities.full_time.over_under['2.50'].over*100).toFixed(2)}}%
        </td>
      </ng-container>
    
      <ng-container matColumnDef=" under 3.5 ">
        <th mat-header-cell *matHeaderCellDef>under 3.5</th>
        <td mat-cell *matCellDef="let event">            
            {{(event.probabilities.full_time.over_under['3.50'].under*100).toFixed(2)}}%
        </td>
      </ng-container>
    
      <ng-container matColumnDef=" under 4.5 ">
        <th mat-header-cell *matHeaderCellDef>under 4.5</th>
        <td mat-cell *matCellDef="let event">
            {{(event.probabilities.full_time.over_under['4.50'].under*100).toFixed(2)}}%
        </td>
      </ng-container>
    
      <ng-container matColumnDef=" btts yes ">
        <th mat-header-cell *matHeaderCellDef>btts yes</th>
        <td mat-cell *matCellDef="let event">
            {{(event.probabilities.full_time.btts.yes*100).toFixed(2)}}%
        </td>
      </ng-container>

      <ng-container matColumnDef=" btts no ">
          <th mat-header-cell *matHeaderCellDef>btts no</th>
          <td mat-cell *matCellDef="let event">
            {{(event.probabilities.full_time.btts.no*100).toFixed(2)}}%
          </td>
        </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
 
</table>

<mat-card *ngIf="!events.length === 0">Nothing to display</mat-card>